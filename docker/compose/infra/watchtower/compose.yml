services:
  watchtower:
    image: containrrr/watchtower:latest
    container_name: watchtower
    restart: unless-stopped
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    environment:
      # Nur pr체fen, nicht automatisch updaten
      - WATCHTOWER_MONITOR_ONLY=true

      # Pr체fintervall: t채glich um 5:00 Uhr
      - WATCHTOWER_SCHEDULE=0 0 5 * * *

      # Benachrichtigung per Gotify
      # Token musst du im Gotify-Webinterface unter Apps erstellen
      - WATCHTOWER_NOTIFICATIONS=shoutrrr
      - WATCHTOWER_NOTIFICATION_URL=gotify://gotify.happy-mining.de/${GTF_TOKEN}?title=Docker+Updates

      # Nur bei verf체gbaren Updates benachrichtigen
      - WATCHTOWER_NOTIFICATIONS_LEVEL=info

      # Logging
      - WATCHTOWER_DEBUG=false

      # API Version explizit setzen
      - DOCKER_API_VERSION=1.52

    networks:
      - backend

networks:
  backend:
    external: true
