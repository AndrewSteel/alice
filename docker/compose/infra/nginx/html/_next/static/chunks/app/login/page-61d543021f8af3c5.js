(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{28:(e,t,r)=>{"use strict";r.d(t,{L:()=>o,WG:()=>l,gf:()=>s,iD:()=>i,ri:()=>d,tf:()=>c});let a="/api/auth",n="alice_token";function s(){return localStorage.getItem(n)}function l(e){localStorage.setItem(n,e)}function o(){localStorage.removeItem(n)}async function i(e,t){let r;try{r=await fetch("".concat(a,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})})}catch(e){throw Error("NETWORK_ERROR")}if(!r.ok)throw Error("Ung\xfcltige Anmeldedaten");return r.json()}async function c(e){let t=await fetch("".concat(a,"/validate"),{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw Error("Token ung\xfcltig");return(await t.json()).user}async function d(e){fetch("".concat(a,"/logout"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)}}).catch(()=>{}),o()}},854:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(2115),n=r(875);function s(){let e=(0,a.useContext)(n.c);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},875:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>c,c:()=>i});var a=r(5155),n=r(2115),s=r(63),l=r(9117),o=r(28);let i=(0,n.createContext)(null);function c(e){let{children:t}=e,r=(0,s.useRouter)(),[c,d]=(0,n.useState)(null),[u,f]=(0,n.useState)(!0);(0,n.useEffect)(()=>{let e=(0,o.gf)();if(!e){f(!1),r.replace("/login");return}try{let t=(0,l.i)(e).exp;if(t&&Date.now()/1e3>t){(0,o.L)(),f(!1),r.replace("/login");return}}catch(e){(0,o.L)(),f(!1),r.replace("/login");return}(0,o.tf)(e).then(e=>d(e)).catch(()=>{(0,o.L)(),r.replace("/login")}).finally(()=>f(!1))},[r]);let g=(0,n.useCallback)((e,t)=>{(0,o.WG)(e),d(t)},[]),m=(0,n.useCallback)(()=>{let e=(0,o.gf)();e&&(0,o.ri)(e),d(null),r.replace("/login")},[r]);return(0,a.jsx)(i.Provider,{value:{user:c,isLoading:u,login:g,logout:m},children:t})}},3998:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var a=r(5155),n=r(2115),s=r(2467),l=r(3101),o=r(4269);let i=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:r,variant:n,size:l,asChild:c=!1,...d}=e,u=c?s.DX:"button";return(0,a.jsx)(u,{className:(0,o.cn)(i({variant:n,size:l,className:r})),ref:t,...d})});c.displayName="Button"},4269:(e,t,r)=>{"use strict";r.d(t,{cn:()=>s});var a=r(2821),n=r(5889);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.QP)((0,a.$)(t))}},4296:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>N});var a=r(5155),n=r(2115),s=r(63),l=r(9117),o=r(28),i=r(5418),c=r(4294);let d=(0,c.A)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),u=(0,c.A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var f=r(3998),g=r(5142),m=r(7602),h=n.forwardRef((e,t)=>(0,a.jsx)(m.sG.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null==(r=e.onMouseDown)||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));h.displayName="Label";var p=r(3101),b=r(4269);let x=(0,p.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),y=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(h,{ref:t,className:(0,b.cn)(x(),r),...n})});y.displayName=h.displayName;var v=r(854);function w(){let{login:e}=(0,v.A)(),[t,r]=(0,n.useState)(""),[s,l]=(0,n.useState)(""),[c,m]=(0,n.useState)(!1),[h,p]=(0,n.useState)(null),[b,x]=(0,n.useState)(!1),w=b||!t.trim()||!s.trim();async function N(r){r.preventDefault(),p(null),x(!0);try{let{token:r,user:a}=await (0,o.iD)(t.trim(),s);e(r,a),window.location.href="/"}catch(e){e instanceof Error&&"NETWORK_ERROR"===e.message?p("Verbindungsfehler — bitte erneut versuchen"):p("Ung\xfcltige Anmeldedaten")}finally{x(!1)}}return(0,a.jsxs)("div",{className:"flex flex-col items-center w-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-8",children:[(0,a.jsx)(i.A,{className:"h-8 w-8 text-blue-500","aria-hidden":!0}),(0,a.jsx)("span",{className:"text-2xl font-bold text-gray-100",children:"Alice"})]}),(0,a.jsxs)("form",{onSubmit:N,className:"w-full space-y-4","aria-label":"Anmeldung",noValidate:!0,children:[(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)(y,{htmlFor:"username",className:"text-gray-300",children:"Benutzername"}),(0,a.jsx)(g.p,{id:"username",type:"text",autoComplete:"username",value:t,onChange:e=>r(e.target.value),disabled:b,className:"bg-gray-700 border-gray-600 text-gray-100 placeholder:text-gray-500 focus:border-blue-500",placeholder:"Benutzername",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)(y,{htmlFor:"password",className:"text-gray-300",children:"Passwort"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(g.p,{id:"password",type:c?"text":"password",autoComplete:"current-password",value:s,onChange:e=>l(e.target.value),disabled:b,className:"bg-gray-700 border-gray-600 text-gray-100 placeholder:text-gray-500 focus:border-blue-500 pr-10",placeholder:"Passwort",required:!0}),(0,a.jsx)("button",{type:"button",onClick:()=>m(e=>!e),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-200 transition-colors","aria-label":c?"Passwort verbergen":"Passwort anzeigen",children:c?(0,a.jsx)(d,{className:"h-4 w-4"}):(0,a.jsx)(u,{className:"h-4 w-4"})})]})]}),h&&(0,a.jsx)("p",{role:"alert",className:"text-sm text-red-400",children:h}),(0,a.jsx)(f.$,{type:"submit",disabled:w,className:"w-full bg-blue-600 hover:bg-blue-500 text-white disabled:opacity-50",children:b?"Wird angemeldet…":"Anmelden"})]})]})}function N(){let e=(0,s.useRouter)(),[t,r]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{let t=(0,o.gf)();if(t)try{let r=(0,l.i)(t).exp;if(r&&Date.now()/1e3<r)return void e.replace("/")}catch(e){}r(!0)},[e]),t)?(0,a.jsx)("main",{className:"min-h-screen bg-gray-900 flex items-start justify-center md:items-center p-6",children:(0,a.jsx)("div",{className:"w-full max-w-sm md:bg-gray-800 md:rounded-xl md:shadow-xl md:p-8 pt-12 md:pt-8",children:(0,a.jsx)(w,{})})}):null}},5142:(e,t,r)=>{"use strict";r.d(t,{p:()=>l});var a=r(5155),n=r(2115),s=r(4269);let l=n.forwardRef((e,t)=>{let{className:r,type:n,...l}=e;return(0,a.jsx)("input",{type:n,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...l})});l.displayName="Input"},6844:(e,t,r)=>{Promise.resolve().then(r.bind(r,4296))}},e=>{e.O(0,[516,441,255,358],()=>e(e.s=6844)),_N_E=e.O()}]);